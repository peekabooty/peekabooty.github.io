<head>
    <title>Verdansk</title>
    <link rel="icon" href="./../static/assets/icon.png" type="image/png" />
</head>

<img id="map" src="./../static/assets/verdansk/map.png"/>

<style>
    #map {
        object-fit: cover;
        width: 100%;
    }
    #pin {
        position: absolute;
    }
    body {
        background-color: black;
    }
</style>
<script>
    const IMAGE_RATIO = 0.93;

    var pin = new Image(64,64);
    pin.src = "./../static/assets/pin.png";
    pin.id = "pin";

    var map = document.getElementById("map");

    var img = new Image();
    img.onload = function() {
        img.style.display = 'none';
        var canvas = document.createElement("canvas");
        canvas.width = map.clientWidth;
        canvas.height = map.clientWidth * IMAGE_RATIO;
        var ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0)
        data = [0,0,0];
        while(!isWhite(data))
        {
            response = getNextPixel(ctx,img);
            data = response[0];
            x = response[1];
            y = response[2];
        }   
        pin.style.top = y;
        pin.style.left = x;
        document.body.append(pin);
    };
    img.src = "./../static/assets/verdansk/mask.png";

    function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min)) + min;
    }

    function getNextPixel(ctx,img) {
        x = getRandomInt(0,img.width);
        y = getRandomInt(0,(img.height * IMAGE_RATIO));
        var pixel = ctx.getImageData(x, y, 1, 1);
        var data = pixel.data;
        return [data,x,y]
    }

    function isWhite(data) {
        return data[0] == 255 && data[1] == 255 && data[2] == 255
    }

</script>
