<head>
    <title>Verdansk</title>
    <link rel="icon" href="./../static/assets/icon.png" type="image/png" />
</head>

<canvas id="canvas"></canvas>
<img id="map" src="./../static/assets/verdansk/map.png"/>

<style>
    #map {
        object-fit: cover;
        width: 100%;
    }
    #pin {
        position: absolute;
    }
    body {
        background-color: black;
    }
</style>
<script>
    const IMAGE_RATIO = 0.93;

    var pin = new Image(64,64);
    pin.src = "./../static/assets/pin.png";
    pin.id = "pin";

    var map = document.getElementById("map");
    x = getRandomInt(0,map.clientWidth);
    y = getRandomInt(0,(map.clientWidth * IMAGE_RATIO));
    pin.style.top = y;
    pin.style.left = x;
    document.body.append(pin);

    var img = new Image();
    img.onload = function() {
        img.style.display = 'none';
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0)
        var pixel = ctx.getImageData(x, y, 1, 1);
        var data = pixel.data;
        console.log(data);
        var canvas = document.getElementById("pixel_data");
        var rgba = 'rgba(' + data[0] + ', ' + data[1] +
                ', ' + data[2] + ', ' + (data[3] / 255) + ')';
        console.log(rgba);
    };
    img.src = "./../static/assets/verdansk/mask.png";

    function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min)) + min;
    }
</script>
